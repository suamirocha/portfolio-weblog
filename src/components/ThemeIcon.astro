---
---
<button id="themeToggle">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z" fill="#D8D8D8"/>
    <mask id="mask0_165_2" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="7" y="7" width="10" height="10">
    <path d="M12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z" fill="#FFA0A0"/>
    </mask>
    <g mask="url(#mask0_165_2)">
    <path d="M24 0H0V24H24V0Z" fill="#FFA0A0"/>
    </g>
    <path d="M7.19638 3.36876C7.6807 3.10333 8.28849 3.28078 8.55392 3.76509C8.81935 4.24941 8.64191 4.85721 8.15759 5.12264C7.49702 5.48466 6.88727 5.94116 6.34315 6.48528C3.21895 9.60948 3.21895 14.6748 6.34315 17.799C9.46734 20.9232 14.5327 20.9232 17.6569 17.799C20.781 14.6748 20.781 9.60948 17.6569 6.48528C17.1432 5.97163 16.571 5.53602 15.9527 5.1842C15.4726 4.9111 15.3049 4.30056 15.578 3.82052C15.8511 3.34049 16.4616 3.17275 16.9417 3.44586C17.7153 3.88599 18.4305 4.43053 19.0711 5.07107C22.9763 8.97631 22.9763 15.308 19.0711 19.2132C15.1658 23.1184 8.83418 23.1184 4.92893 19.2132C1.02369 15.308 1.02369 8.97631 4.92893 5.07107C5.60753 4.39247 6.36989 3.82172 7.19638 3.36876ZM11.8579 1C12.4101 1 12.8579 1.44772 12.8579 2V9C12.8579 9.55228 12.4101 10 11.8579 10C11.3056 10 10.8579 9.55228 10.8579 9V2C10.8579 1.44772 11.3056 1 11.8579 1Z" fill="black"/>
    <mask id="mask1_165_2" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="2" y="1" width="20" height="22">
    <path d="M7.19638 3.36876C7.6807 3.10333 8.28849 3.28078 8.55392 3.76509C8.81935 4.24941 8.64191 4.85721 8.15759 5.12264C7.49702 5.48466 6.88727 5.94116 6.34315 6.48528C3.21895 9.60948 3.21895 14.6748 6.34315 17.799C9.46734 20.9232 14.5327 20.9232 17.6569 17.799C20.781 14.6748 20.781 9.60948 17.6569 6.48528C17.1432 5.97163 16.571 5.53602 15.9527 5.1842C15.4726 4.9111 15.3049 4.30056 15.578 3.82052C15.8511 3.34049 16.4616 3.17275 16.9417 3.44586C17.7153 3.88599 18.4305 4.43053 19.0711 5.07107C22.9763 8.97631 22.9763 15.308 19.0711 19.2132C15.1658 23.1184 8.83418 23.1184 4.92893 19.2132C1.02369 15.308 1.02369 8.97631 4.92893 5.07107C5.60753 4.39247 6.36989 3.82172 7.19638 3.36876ZM11.8579 1C12.4101 1 12.8579 1.44772 12.8579 2V9C12.8579 9.55228 12.4101 10 11.8579 10C11.3056 10 10.8579 9.55228 10.8579 9V2C10.8579 1.44772 11.3056 1 11.8579 1Z" fill="#7600FF"/>
    </mask>
    <g mask="url(#mask1_165_2)">
    <path d="M24 0H0V24H24V0Z" fill="#7600FF"/>
    </g>
    </svg>
    
</button>

<style>
  button {
    background-color: transparent;
    border: none;
  }
  #theme {
    border: 0;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background: none;
  }
  .sun { fill: black; }
  .moon { fill: white; }
  

  :global(.dark) .sun { fill: black; }
  :global(.dark) .moon { fill: white; }
</style>


<script
import type ThemeIcon from "./ThemeIcon.astro";
>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme');
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark';
    }
      return 'light';
  })();
      
  if (theme === 'light') {
    document.documentElement.classList.remove('dark');
  } else {
    document.documentElement.classList.add('dark');
  }

  window.localStorage.setItem('theme', theme);

  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");
    
    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }

  document.getElementById("themeToggle").addEventListener("click", handleToggleClick);
</script>